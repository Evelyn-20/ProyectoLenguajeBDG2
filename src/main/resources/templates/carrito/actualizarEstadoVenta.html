<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
    <head th:replace="~{layout/plantilla :: head}">
        <title>Nous - Cambiar Estado de Compra</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body class="d-flex flex-column min-vh-100 bg-light">
        
        <header th:replace="~{layout/plantilla :: header}"></header>

        <section class="py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="card shadow-sm rounded-4 border-0">
                            <div class="card-body p-5">
                                <h2 class="text-center mb-5 fw-bold display-6">Cambiar Estado de Compra</h2>
                                
                                <!-- Información básica de la compra -->
                                <div class="card bg-light border-0 rounded-3 mb-4">
                                    <div class="card-body">
                                        <h5 class="fw-bold mb-3">Información de la Compra</h5>
                                        <div class="row">
                                            <div class="col-6">
                                                <p><strong>Orden #:</strong> COM-2024-001</p>
                                                <p><strong>Cliente:</strong> Juan Pérez</p>
                                            </div>
                                            <div class="col-6">
                                                <p><strong>Fecha:</strong> 15/01/2024</p>
                                                <p><strong>Total:</strong> ₡78,000</p>
                                            </div>
                                        </div>
                                        <div class="text-center mt-3">
                                            <span class="badge bg-warning text-dark fs-6 px-3 py-2">Estado Actual: PENDIENTE</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Formulario para cambiar estado -->
                                <form th:action="@{/compra/actualizar-estado}" th:object="${compra}" method="POST">
                                    <input type="hidden" th:field="*{id}" name="id"/>
                                    
                                    <div class="mb-4">
                                        <label for="estado" class="form-label fw-semibold">Estado de la Compra</label>
                                        <select class="form-select rounded-3 py-2" th:field="*{estado}" name="estado" id="estado" required="true">
                                            <option value="">Seleccionar estado</option>
                                            <option value="PENDIENTE">Pendiente</option>
                                            <option value="PROCESANDO">Procesando</option>
                                            <option value="ENVIADO">Enviado</option>
                                            <option value="ENTREGADO">Entregado</option>
                                            <option value="CANCELADO">Cancelado</option>
                                        </select>
                                    </div>
                                    
                                    <div class="d-flex gap-3 mt-4">
                                        <button type="submit" class="btn btn-success px-4 py-3 rounded-3 fw-bold text-uppercase flex-grow-1">
                                            Guardar Estado
                                        </button>
                                        <a th:href="@{/compra/listar}" class="btn btn-secondary px-4 py-3 rounded-3 fw-bold text-uppercase">
                                            Cancelar
                                        </a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <footer th:replace="~{layout/plantilla :: footer}"></footer>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>